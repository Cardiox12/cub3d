
HORIZONTAL :

Steps of finding intersections with horizontal grid lines :

1. Find coordinate of the first intersection (point A in this example).

2. Find Ya.
                Ray is Up :
                        Ya < 0
                Tay is Down :
                        Ya > 0

3. Find Xa using the equation given above.

4. Check the grid at the intersection point. 
        If intersection is a wall :
            - stop and calculate the distance.
        If intersection is not a wall :
            - extend the to the next intersection point. 
            - Notice that the coordinate of the next intersection point call it : (Xnew, Ynew) 
                Xnew = Xold + Xa
                Ynew = Yold + Ya

VERTICAL :

Steps of finding intersections with vertical grid lines:

1. Find coordinate of the first intersection (point B in this example).

2. The ray is facing right in the picture, so 
        - If the ray is facing right :
            B.x = rounded_down(Px / 64) * 64 + 64.
        - If the ray is facing left : 
            B.x = rounded_down(Px / 64) * 64 â€“ 1.

4. A.y = Py + (Px-A.x) * tan(alpha);

5. Find Xa. 
                Xa = width of the grid
                - if the ray is facing right : 
                    Xa > 0 
                - if the ray is facing left :
                    Ya < 0

6. Find Ya using the equation given above.
7. Check the grid at the intersection point. 
                - If there is a wall on the grid : 
                    - stop and calculate the distance.
                - If there is no wall : 
                    - extend the to the next intersection point. 
                        Notice that the coordinate of the next intersection point : (Xnew, Ynew) 
                            Xnew = Xold + Xa
                            Ynew = Yold + Ya